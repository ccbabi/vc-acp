!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["vc-acp"]=t()}(this,function(){"use strict";var e={name:"vc-mask",props:{className:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){return{show:!1}},methods:{touchmove:function(e){e.preventDefault(),e.stopPropagation()},afterLeave:function(e){e.parentNode.removeChild(e),this.__afterLeave&&this.__afterLeave(),this.$destroy()}}},t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"vc-mask"},on:{"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"vc-mask",class:e.className,style:{zIndex:e.zIndex},on:{touchmove:e.touchmove}})])};t._withStripped=!0;function n(){var l=document.head||document.getElementsByTagName("head")[0],d=n.styles||(n.styles={}),u="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,t){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var n=u?t.media||"default":e,o=d[n]||(d[n]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var a=t.source,s=o.ids.length;if(o.ids.push(e),u&&(o.element=o.element||document.querySelector("style[data-group="+n+"]")),!o.element){var i=o.element=document.createElement("style");i.type="text/css",t.media&&i.setAttribute("media",t.media),u&&(i.setAttribute("data-group",n),i.setAttribute("data-next-index","0")),l.appendChild(i)}if(u&&(s=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",s+1)),o.element.styleSheet)o.parts.push(a),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var c=document.createTextNode(a),r=o.element.childNodes;r[s]&&o.element.removeChild(r[s]),r.length?o.element.insertBefore(c,r[s]):o.element.appendChild(c)}}}}}var o=function(e,t,n,o,a,s,i,c){var r=("function"==typeof n?n.options:n)||{};r.__file="/Users/wangjie/repositories/vc-acp/node_modules/vc-mask/src/mask.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,a&&(r.functional=!0)),r._scopeId=o;var l=void 0;if(t&&(l=function(e){t.call(this,i(e))}),void 0!==l)if(r.functional){var d=r.render;r.render=function(e,t){return l.call(t),d(e,t)}}else{var u=r.beforeCreate;r.beforeCreate=u?[].concat(u,l):[l]}return r}(void 0!==t?{render:t,staticRenderFns:[]}:{},function(e){e&&e("data-v-67ea323a_0",{source:"\n.vc-mask {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: #000;\n  opacity: .5;\n}\n.vc-mask-enter-active,\n.vc-mask-leave-active {\n  transition: opacity .2s;\n}\n.vc-mask-enter,\n.vc-mask-leave-to,\n.vc-mask-leave-active {\n  opacity: 0;\n}\n",map:void 0,media:void 0})},void 0===e?{}:e,void 0,!1,0,void 0!==n?n:function(){},"undefined"!=typeof __vue_create_injector_ssr__&&__vue_create_injector_ssr__),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=void 0,d=void 0,a=void 0,u=!1,s=!1,v={className:"",zIndex:1e3,enabledClickClose:!0,enabledEscClose:!1},p=[],f={};function i(e){var t=p[p.length-1];if(t){var n=f[t];n&&n.close&&n.instance&&(e&&n.option.enabledClickClose||n.option.enabledEscClose)&&n.close.apply(n.instance)}}function m(e){27===e.keyCode&&i(0)}function h(e){var t=this.$mount().$el;!s&&e.enabledClickClose&&(t.addEventListener("click",i,!1),s=!0),a.appendChild(t)}function _(t){var n=this;["className","zIndex"].forEach(function(e){n[e]=t[e]})}function y(e){this.__initEl(e),this.__setData(e),this.show=!0}function b(){var e=p[p.length-1];e&&this.__setData(f[e].option),p.length||(this.show=!1)}function w(){s&&(d.$el.removeEventListener("click",i,!1),s=!1),u&&(window.removeEventListener("keydown",m,!1),u=!1),d=null}function g(){}function C(s){var i=Math.random().toString(36).slice(2);return f[i]={},(s=s||{}).enabledEscClose&&(u||(window.addEventListener("keydown",m,!1),u=!0)),{mapMaskOpen:function(e){var t=void 0,n=void 0,o=void 0,a=void 0;return e=e||g,function(){!1!==(n=e.apply(this,arguments))&&(n&&"object"===(void 0===n?"undefined":r(n))&&(a=n),o=c({},v,l.useOption,s,a),f[i].option=o,f[i].instance=this,~(t=p.indexOf(i))?1<p.length&&p.push(p.splice(t,1)[0]):p.push(i),(d=d||new l).__open(o))}},mapMaskClose:function(e){var t=void 0,n=void 0,o=void 0;e=e||g;var a=function(){return!1!==(n=e.apply(this,arguments))&&p.length&&(t=p[p.length-1],~(o=p.indexOf(i))&&p.splice(o,1),t===i&&d.close()),n};return f[i].close=a}}}var k={install:function(e,t){var n;n=e.extend(o),Object.assign(n.prototype,{__open:y,__initEl:h,__setData:_,close:b,__afterLeave:w}),(l=n).useOption=t,a=document.body||document.querySelector("body")||document.getElementsByTagName("body")[0]}},x={name:"vc-acp",props:{className:{type:String,default:""},title:{type:String,default:"提示"},message:{type:String,default:" "},value:{type:String,default:""},placeholder:{type:String,default:""},showInput:{type:Boolean,default:!1},cancelButtonText:{type:String,default:"取消"},confirmButtonText:{type:String,default:"确定"},showCancelButton:{type:Boolean,default:!1},showConfirmButton:{type:Boolean,default:!0},callback:{type:Function,default:function(){}},zIndex:{type:Number,default:10001}},data:function(){return{show:!1}},methods:{afterLeave:function(e){this.__afterLeave()&&(e.parentNode.removeChild(e),this.$destroy())}}},N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"vc-acp"},on:{"after-leave":t.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"vc-acp",class:t.className,style:{zIndex:t.zIndex}},[t.title?n("div",{staticClass:"vc-acp-header"},[n("div",{staticClass:"vc-acp-title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.message?n("div",{staticClass:"vc-acp-body"},[n("div",{staticClass:"vc-acp-message",domProps:{innerHTML:t._s(t.message)}}),t._v(" "),t.showInput?n("div",{staticClass:"vc-acp-prompt"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",staticClass:"vc-acp-input",attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"vc-acp-footer"},[t.showCancelButton?n("button",{staticClass:"vc-acp-btn vc-acp-cancel",on:{click:function(e){t.__action(!1)}}},[t._v(" "+t._s(t.cancelButtonText))]):t._e(),t._v(" "),t.showConfirmButton?n("button",{staticClass:"vc-acp-btn vc-acp-confirm",on:{click:function(e){t.__action(!0)}}},[t._v(" "+t._s(t.confirmButtonText))]):t._e()])])])};N._withStripped=!0;var B,S,I,E,j,O=(B=void 0!==N?{render:N,staticRenderFns:[]}:{},S=void 0===x?{}:x,I=void 0,E=!1,"undefined"!=typeof __vue_create_injector_ssr__&&__vue_create_injector_ssr__,(j=("function"==typeof S?S.options:S)||{}).__file="/Users/wangjie/repositories/vc-acp/src/acp.vue",j.render||(j.render=B.render,j.staticRenderFns=B.staticRenderFns,j._compiled=!0,E&&(j.functional=!0)),j._scopeId=I,j),L=void 0,$=void 0,T=void 0,z=void 0,F={mask:!0,maskClassName:""},P={className:"",title:"提示",message:" ",value:"",placeholder:"",showInput:!1,cancelButtonText:"取消",confirmButtonText:"确定",showCancelButton:!1,showConfirmButton:!0,zIndex:10001},A={enabledClickClose:!1,enabledEscClose:!1},D=[];function M(e,t,n){return U({message:e,title:n},t)}function R(e,t,n){return U({message:e,title:n,showCancelButton:!0},t)}function q(e,t,n,o,a){return U({message:e,title:n,value:o,placeholder:a,showInput:!0,showCancelButton:!0},t)}function U(e,n){var o=function(e){var t,n=void 0,o=void 0,a=void 0,s=void 0;for(n=1,t=arguments.length;n<t;n++)for(a in o=arguments[n])o.hasOwnProperty(a)&&void 0!==(s=o[a])&&(e[a]=s);return e}({},F,P,A,L.useOption,e),a=(($=$||new L).callback=G,$);if("undefined"!=typeof Promise)return new Promise(function(e,t){D.push({option:o,callback:n,resolve:e,reject:t}),a.__show()});D.push({option:o}),a.__show()}function H(){var t,e=this,n=void 0,o=void 0;return!this.show&&(z=D.shift(),t=z.option,T.appendChild(this.$mount().$el),this.__setData(t),this.show=!0,t.showInput&&this.$nextTick(function(){e.$refs.input.focus()}),!!t.mask&&(n={},Object.keys(A).forEach(function(e){void 0!==(o=t[e])&&(n[e]=o)}),t.maskClassName&&(n.className=t.maskClassName),t.zIndex&&(n.zIndex=t.zIndex-1),n))}function G(e){var t=void 0;if(z.option.showInput&&(t=$.value),z.callback)return z.callback(e?t:void 0);e?z.resolve(t):z.reject()}function J(e){!1!==this.callback(e)&&this.__close()}function K(t){Object.keys(P).forEach(function(e){$[e]=t[e]})}function Q(){return D.length?($.__show(),!1):!($=null)}function V(){this.show=!1}function W(e,t){var n,o;return n=e.extend(O),o=C(A),Object.assign(n.prototype,{__show:o.mapMaskOpen(H),__close:o.mapMaskClose(V),__setData:K,__action:J,__afterLeave:Q}),(L=n).useOption=t,{$acp:U,$alert:M,$confirm:R,$prompt:q}}return{install:function(t,e){var n=W(t,e);T=document.body||document.querySelector("body")||document.getElementsByTagName("body")[0],Object.keys(n).forEach(function(e){t[e]=t.prototype[e]=n[e]}),t.use(k)}}});
