!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["vc-acp"]=t()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e={name:"vc-mask",props:{className:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){return{show:!1}},methods:{touchmove:function(e){e.preventDefault(),e.stopPropagation()},afterLeave:function(e){e.parentNode.removeChild(e),this.__afterLeave&&this.__afterLeave(),this.$destroy()}}},n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"vc-mask"},on:{"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"vc-mask",class:e.className,style:{zIndex:e.zIndex},on:{touchmove:e.touchmove}})])};n._withStripped=!0;var o,a,s,i,c,r=(o=void 0!==n?{render:n,staticRenderFns:[]}:{},a=void 0===e?{}:e,s=void 0,i=!1,"undefined"!=typeof __vue_create_injector_ssr__&&__vue_create_injector_ssr__,(c=("function"==typeof a?a.options:a)||{}).__file="/Users/wangjie/repositories/vc-mask/src/mask.vue",c.render||(c.render=o.render,c.staticRenderFns=o.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),c._scopeId=s,c),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return void 0===e?"undefined":t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":t(e)},d=void 0,p=void 0,v=void 0,f=!1,m=!1,_={className:"",zIndex:1e3,enabledClickClose:!0,enabledEscClose:!1},h=[],y={};function w(e){var t=h[h.length-1];if(t){var n=y[t];n&&n.close&&n.instance&&(e&&n.option.enabledClickClose||n.option.enabledEscClose)&&n.close.apply(n.instance)}}function b(e){27===e.keyCode&&w(0)}function C(e){var t=this.$mount().$el;!m&&e.enabledClickClose&&(t.addEventListener("click",w,!1),m=!0),v.appendChild(t)}function g(t){var n=this;["className","zIndex"].forEach(function(e){n[e]=t[e]})}function k(e){this.__initEl(e),this.__setData(e),this.show=!0}function x(){var e=h[h.length-1];e&&this.__setData(y[e].option),h.length||(this.show=!1)}function S(){m&&(p.$el.removeEventListener("click",w,!1),m=!1),f&&(window.removeEventListener("keydown",b,!1),f=!1),p=null}function I(){}function N(s){var i=Math.random().toString(36).slice(2);return y[i]={},(s=s||{}).enabledEscClose&&(f||(window.addEventListener("keydown",b,!1),f=!0)),{mapMaskOpen:function(e){var t=void 0,n=void 0,o=void 0,a=void 0;return e=e||I,function(){!1!==(n=e.apply(this,arguments))&&(n&&"object"===(void 0===n?"undefined":u(n))&&(a=n),o=l({},_,d.useOption,s,a),y[i].option=o,y[i].instance=this,~(t=h.indexOf(i))?1<h.length&&h.push(h.splice(t,1)[0]):h.push(i),(p=p||new d).__open(o))}},mapMaskClose:function(e){var t=void 0,n=void 0,o=void 0;e=e||I;var a=function(){return!1!==(n=e.apply(this,arguments))&&h.length&&(t=h[h.length-1],~(o=h.indexOf(i))&&h.splice(o,1),t===i&&p.close()),n};return y[i].close=a}}}var j={install:function(e,t){var n;n=e.extend(r),Object.assign(n.prototype,{__open:k,__initEl:C,__setData:g,close:x,__afterLeave:S}),(d=n).useOption=t,v=document.body||document.querySelector("body")||document.getElementsByTagName("body")[0]}},B={name:"vc-acp",props:{className:{type:String,default:""},title:{type:String,default:"提示"},message:{type:String,default:" "},value:{type:String,default:""},placeholder:{type:String,default:""},showInput:{type:Boolean,default:!1},cancelButtonText:{type:String,default:"取消"},confirmButtonText:{type:String,default:"确定"},showCancelButton:{type:Boolean,default:!1},showConfirmButton:{type:Boolean,default:!0},callback:{type:Function,default:function(){}},zIndex:{type:Number,default:10001}},data:function(){return{show:!1}},methods:{afterLeave:function(e){this.__afterLeave()&&(e.parentNode.removeChild(e),this.$destroy())}}},E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"vc-acp"},on:{"after-leave":t.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"vc-acp",class:t.className,style:{zIndex:t.zIndex}},[t.title?n("div",{staticClass:"vc-acp-header"},[n("div",{staticClass:"vc-acp-title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.message?n("div",{staticClass:"vc-acp-body"},[n("div",{staticClass:"vc-acp-message",domProps:{innerHTML:t._s(t.message)}}),t._v(" "),t.showInput?n("div",{staticClass:"vc-acp-prompt"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",staticClass:"vc-acp-input",attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"vc-acp-footer"},[t.showCancelButton?n("a",{staticClass:"vc-acp-btn vc-acp-cancel",attrs:{href:"javascript:;"},on:{click:function(e){t.__action(!1)}}},[t._v(" "+t._s(t.cancelButtonText))]):t._e(),t._v(" "),t.showConfirmButton?n("a",{staticClass:"vc-acp-btn vc-acp-confirm",attrs:{href:"javascript:;"},on:{click:function(e){t.__action(!0)}}},[t._v(" "+t._s(t.confirmButtonText))]):t._e()])])])};E._withStripped=!0;var O,$,L,z,T,F=(O=void 0!==E?{render:E,staticRenderFns:[]}:{},$=void 0===B?{}:B,L=void 0,z=!1,"undefined"!=typeof __vue_create_injector_ssr__&&__vue_create_injector_ssr__,(T=("function"==typeof $?$.options:$)||{}).__file="/Users/wangjie/repositories/vc-acp/src/acp.vue",T.render||(T.render=O.render,T.staticRenderFns=O.staticRenderFns,T._compiled=!0,z&&(T.functional=!0)),T._scopeId=L,T),P=void 0,D=void 0,M=void 0,R=void 0,q={mask:!0,maskClassName:""},U={className:"",title:"提示",message:" ",value:"",placeholder:"",showInput:!1,cancelButtonText:"取消",confirmButtonText:"确定",showCancelButton:!1,showConfirmButton:!0,zIndex:10001},H={enabledClickClose:!1,enabledEscClose:!1},A=[];function G(e,t,n){return Q({message:e,title:n},t)}function J(e,t,n){return Q({message:e,title:n,showCancelButton:!0},t)}function K(e,t,n,o,a){return Q({message:e,title:n,value:o,placeholder:a,showInput:!0,showCancelButton:!0},t)}function Q(e,n){var o=function(e){var t,n=void 0,o=void 0,a=void 0,s=void 0;for(n=1,t=arguments.length;n<t;n++)for(a in o=arguments[n])o.hasOwnProperty(a)&&void 0!==(s=o[a])&&(e[a]=s);return e}({},q,U,H,P.useOption,e),a=((D=D||new P).callback=W,D);if("undefined"!=typeof Promise)return new Promise(function(e,t){A.push({option:o,callback:n,resolve:e,reject:t}),a.__show()});A.push({option:o}),a.__show()}function V(){var t,e=this,n=void 0,o=void 0;return!this.show&&(R=A.shift(),t=R.option,M.appendChild(this.$mount().$el),this.__setData(t),this.show=!0,t.showInput&&this.$nextTick(function(){e.$refs.input.focus()}),!!t.mask&&(n={},Object.keys(H).forEach(function(e){void 0!==(o=t[e])&&(n[e]=o)}),t.maskClassName&&(n.className=t.maskClassName),t.zIndex&&(n.zIndex=t.zIndex-1),n))}function W(e){var t=void 0;if(R.option.showInput&&(t=D.value),R.callback)return R.callback(e,t);e?R.resolve(t):R.reject()}function X(e){!1!==this.callback(e)&&this.__close()}function Y(t){Object.keys(U).forEach(function(e){D[e]=t[e]})}function Z(){return A.length?(D.__show(),!1):!(D=null)}function ee(){this.show=!1}function te(e,t){var n,o;return n=e.extend(F),o=N(H),Object.assign(n.prototype,{__show:o.mapMaskOpen(V),__close:o.mapMaskClose(ee),__setData:Y,__action:X,__afterLeave:Z}),(P=n).useOption=t,{$acp:Q,$alert:G,$confirm:J,$prompt:K}}return{install:function(t,e){var n=te(t,e);M=document.body||document.querySelector("body")||document.getElementsByTagName("body")[0],Object.keys(n).forEach(function(e){t[e]=t.prototype[e]=n[e]}),t.use(j)}}});
